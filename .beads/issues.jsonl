{"id":"locdoc-0fo","title":"Verify golangci-lint configuration alignment","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:40:32.010199-08:00","updated_at":"2025-12-07T17:52:59.10034-08:00","closed_at":"2025-12-07T17:52:59.100343-08:00","dependencies":[{"issue_id":"locdoc-0fo","depends_on_id":"locdoc-hw3","type":"blocks","created_at":"2025-12-07T16:40:55.276865-08:00","created_by":"daemon"}]}
{"id":"locdoc-1h6","title":"Create domain types skeleton","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:40:32.199767-08:00","updated_at":"2025-12-07T16:56:36.84987-08:00","closed_at":"2025-12-07T16:56:36.849873-08:00","dependencies":[{"issue_id":"locdoc-1h6","depends_on_id":"locdoc-knx","type":"blocks","created_at":"2025-12-07T16:40:59.902041-08:00","created_by":"daemon"}]}
{"id":"locdoc-1z8","title":"Create GitHub Actions CI workflow","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:40:32.10089-08:00","updated_at":"2025-12-07T18:08:02.712841-08:00","closed_at":"2025-12-07T18:08:02.712844-08:00","dependencies":[{"issue_id":"locdoc-1z8","depends_on_id":"locdoc-knx","type":"blocks","created_at":"2025-12-07T16:40:59.837864-08:00","created_by":"daemon"},{"issue_id":"locdoc-1z8","depends_on_id":"locdoc-0fo","type":"blocks","created_at":"2025-12-07T16:40:59.962233-08:00","created_by":"daemon"}]}
{"id":"locdoc-6ph","title":"Expand docs/ with workflow documentation","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:40:32.388874-08:00","updated_at":"2025-12-07T20:25:33.186919-08:00","closed_at":"2025-12-07T20:25:33.186923-08:00","dependencies":[{"issue_id":"locdoc-6ph","depends_on_id":"locdoc-hw3","type":"blocks","created_at":"2025-12-07T16:40:59.769594-08:00","created_by":"daemon"}]}
{"id":"locdoc-7n8","title":"Improve beads metadata workflow to avoid mixing with feature PRs","description":"## Problem\nWhen using `bd update` to mark tasks closed, the `.beads/issues.jsonl` change ends up in the working tree and can accidentally get included in feature PR commits. This causes PR review tools (like GitHub Copilot) to flag unintended changes.\n\n## Potential solutions\n- Commit beads changes separately before the feature commit\n- Add `.gitattributes` to mark `.beads/` as not needing review\n- Script the \"land this plane\" flow to handle beads commits first\n- Investigate if beads protected_branches config can help more","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T19:15:48.914404-08:00","updated_at":"2025-12-07T19:55:47.046488-08:00","closed_at":"2025-12-07T19:55:47.04649-08:00"}
{"id":"locdoc-7x3","title":"Consider SQLite WAL mode for write-heavy operations","description":"## Problem\n\nSQLite WAL (Write-Ahead Logging) mode can improve performance for write-heavy operations like crawling. Currently using default rollback journal.\n\n## Entrypoints\n\n- `sqlite/sqlite.go` - `Open()` method\n\n## Analysis Needed\n\n- Benchmark crawl performance with/without WAL\n- Consider trade-offs:\n  - WAL creates extra files (`-wal`, `-shm`) alongside database\n  - Better for concurrent access (less relevant for CLI)\n  - Better crash recovery\n  - Files must be checkpointed before moving database\n\n## References\n\n- https://github.com/benbjohnson/wtf/blob/main/sqlite/sqlite.go\n- https://sqlite.org/wal.html\n\n## Validation\n\n- [ ] Benchmark shows measurable improvement\n- [ ] Document decision either way","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-08T13:20:05.747214-08:00","updated_at":"2025-12-08T13:20:19.11677-08:00"}
{"id":"locdoc-a3y","title":"Epic: Documentation Crawler MVP","description":"## Overview\n\nImplement pure Go documentation crawler as defined in docs/plans/2025-12-07-crawling-design.md.\n\n## Scope\n\n- Sitemap-based URL discovery\n- Browser-based page fetching (JS rendering)\n- Content extraction and markdown conversion\n- SQLite storage\n\n## Success Criteria\n\n- `locdoc add \u003cname\u003e \u003curl\u003e` registers project\n- `locdoc crawl [name]` fetches pages from sitemap, stores as Markdown\n- `make validate` passes\n- Builds with `CGO_ENABLED=0`\n\n## Implementation Order\n\n1. sqlite/ - Storage foundation\n2. http/ - Sitemap parsing\n3. rod/ - Browser fetching\n4. trafilatura/ - Content extraction\n5. htmltomd/ - Markdown conversion\n6. cmd/locdoc/ - CLI wiring","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:00:37.291952-08:00","updated_at":"2025-12-07T22:00:37.291952-08:00"}
{"id":"locdoc-a4x","title":"Implement rod/ package","description":"## Problem\n\nNeed browser-based page fetching for JS-rendered documentation sites.\n\n## Entrypoints\n\n- Create `rod/` directory\n- Implement fetcher that returns rendered HTML\n\n## Requirements\n\n- Use `go-rod/rod` for Chrome automation\n- Launch Chrome or connect to existing instance\n- Navigate to URL, wait for JS to render\n- Return rendered HTML as string\n- Handle timeouts gracefully\n- Clean up browser resources on shutdown\n- Define interface in root package during implementation\n\n## Validation\n\n- [ ] Unit tests with mock browser (if feasible)\n- [ ] Integration test against real JS-heavy site\n- [ ] Verify Chrome requirement is documented\n- [ ] `make validate` passes\n\n## References\n\n- docs/plans/2025-12-07-crawling-design.md\n- go-rod/rod documentation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T22:01:24.611936-08:00","updated_at":"2025-12-09T04:54:24.256482-08:00","closed_at":"2025-12-09T04:54:24.256485-08:00","dependencies":[{"issue_id":"locdoc-a4x","depends_on_id":"locdoc-k4l","type":"blocks","created_at":"2025-12-07T22:01:57.221765-08:00","created_by":"daemon"},{"issue_id":"locdoc-a4x","depends_on_id":"locdoc-a3y","type":"parent-child","created_at":"2025-12-07T22:02:04.977866-08:00","created_by":"daemon"}]}
{"id":"locdoc-c4s","title":"Create mock package skeleton","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:40:32.293012-08:00","updated_at":"2025-12-07T19:12:29.650324-08:00","closed_at":"2025-12-07T19:12:29.650327-08:00","dependencies":[{"issue_id":"locdoc-c4s","depends_on_id":"locdoc-1h6","type":"blocks","created_at":"2025-12-07T16:41:00.022992-08:00","created_by":"daemon"}]}
{"id":"locdoc-gc0","title":"Implement trafilatura/ package","description":"## Problem\n\nNeed content extraction to remove boilerplate from crawled pages.\n\n## Entrypoints\n\n- Create `trafilatura/` directory\n- Wrap go-trafilatura library API\n\n## Requirements\n\n- Accept raw HTML string\n- Return clean HTML + title (metadata)\n- Remove boilerplate (nav, footer, sidebar, ads)\n- Preserve main content structure\n- Use go-trafilatura library (not CLI)\n- Define interface in root package during implementation\n\n## Validation\n\n- [ ] Unit tests with HTML fixtures\n- [ ] Test against various doc site formats (Docusaurus, MkDocs, etc.)\n- [ ] `make validate` passes\n\n## References\n\n- docs/plans/2025-12-07-crawling-design.md\n- github.com/markusmobius/go-trafilatura examples/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T22:01:24.742322-08:00","updated_at":"2025-12-09T12:04:36.268301-08:00","closed_at":"2025-12-09T12:04:36.268308-08:00","dependencies":[{"issue_id":"locdoc-gc0","depends_on_id":"locdoc-a4x","type":"blocks","created_at":"2025-12-07T22:01:57.250498-08:00","created_by":"daemon"},{"issue_id":"locdoc-gc0","depends_on_id":"locdoc-a3y","type":"parent-child","created_at":"2025-12-07T22:02:05.004233-08:00","created_by":"daemon"}]}
{"id":"locdoc-hhk","title":"Add SQLite connection pool and busy timeout settings","description":"## Problem\n\nSQLite has connection pool and timeout settings that can prevent \"database is locked\" errors and improve robustness.\n\n## Entrypoints\n\n- `sqlite/sqlite.go` - `Open()` method\n\n## Suggested Settings\n\nFrom Ben Johnson's WTF:\n- `db.SetMaxOpenConns(1)` - SQLite only supports one writer anyway\n- `PRAGMA busy_timeout = 5000` - Wait 5s instead of failing immediately on lock\n\n## References\n\n- https://github.com/benbjohnson/wtf/blob/main/sqlite/sqlite.go\n\n## Validation\n\n- [ ] Settings applied in `Open()`\n- [ ] `make validate` passes","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-08T13:20:05.81999-08:00","updated_at":"2025-12-08T13:20:19.241476-08:00"}
{"id":"locdoc-hw3","title":"Create CLAUDE.md with AI agent instructions","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:40:31.845746-08:00","updated_at":"2025-12-07T16:51:04.766651-08:00","closed_at":"2025-12-07T16:51:04.766654-08:00"}
{"id":"locdoc-k4l","title":"Implement sqlite/ package","description":"## Problem\n\nNeed SQLite storage layer using pure Go driver (no CGO).\n\n## Entrypoints\n\n- Create `sqlite/` directory\n- Implement `ProjectService` interface from project.go\n- Implement `DocumentService` interface from document.go\n\n## Requirements\n\n- Use `ncruces/go-sqlite3` with `database/sql` driver\n- Auto-create schema on first run (migrations)\n- Store document content as Markdown text\n- Content hash (xxHash) for change detection\n- Compile-time interface verification: `var _ locdoc.ProjectService = (*ProjectService)(nil)`\n\n## Validation\n\n- [ ] Unit tests for CRUD operations\n- [ ] Integration test with real SQLite file\n- [ ] `make validate` passes\n- [ ] Builds with `CGO_ENABLED=0`\n\n## References\n\n- docs/plans/2025-12-07-crawling-design.md","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T22:00:47.279328-08:00","updated_at":"2025-12-08T12:37:13.040666-08:00","closed_at":"2025-12-08T12:37:13.04067-08:00","dependencies":[{"issue_id":"locdoc-k4l","depends_on_id":"locdoc-a3y","type":"parent-child","created_at":"2025-12-07T22:02:04.920979-08:00","created_by":"daemon"}]}
{"id":"locdoc-knx","title":"Create Makefile with validate target","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-07T16:40:31.93188-08:00","updated_at":"2025-12-07T16:52:33.128539-08:00","closed_at":"2025-12-07T16:52:33.128541-08:00"}
{"id":"locdoc-mdd","title":"Implement htmltomd/ package","description":"## Problem\n\nNeed HTML to Markdown conversion for storage.\n\n## Entrypoints\n\n- Create `htmltomd/` directory\n- Wrap html-to-markdown library\n\n## Requirements\n\n- Accept clean HTML string\n- Return Markdown string\n- Preserve code blocks with language hints\n- Preserve tables, links, headings\n- Use `JohannesKaufmann/html-to-markdown` library\n- Define interface in root package during implementation\n\n## Validation\n\n- [ ] Unit tests with HTML fixtures\n- [ ] Test code block preservation\n- [ ] Test table conversion\n- [ ] `make validate` passes\n\n## References\n\n- docs/plans/2025-12-07-crawling-design.md\n- github.com/JohannesKaufmann/html-to-markdown","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:01:24.868426-08:00","updated_at":"2025-12-07T22:01:24.868426-08:00","dependencies":[{"issue_id":"locdoc-mdd","depends_on_id":"locdoc-gc0","type":"blocks","created_at":"2025-12-07T22:01:57.281633-08:00","created_by":"daemon"},{"issue_id":"locdoc-mdd","depends_on_id":"locdoc-a3y","type":"parent-child","created_at":"2025-12-07T22:02:05.032944-08:00","created_by":"daemon"}]}
{"id":"locdoc-mtz","title":"Implement http/ package","description":"## Problem\n\nNeed sitemap discovery and parsing for URL extraction.\n\n## Entrypoints\n\n- Create `http/` directory\n- Port sitemap logic from go-trafilatura cmd/\n\n## Requirements\n\n- Discover sitemap URL from robots.txt (`Sitemap:` directive)\n- Fall back to `/sitemap.xml` if not found\n- Parse sitemap XML using `beevik/etree`\n- Handle sitemap indexes recursively\n- Filter URLs by pattern (include/exclude regex)\n- Return list of discovered URLs\n- Respect context cancellation\n- Define interface in root package during implementation\n\n## Validation\n\n- [ ] Unit tests with sitemap XML fixtures\n- [ ] Integration test against real site (e.g., go.dev)\n- [ ] `make validate` passes\n\n## References\n\n- docs/plans/2025-12-07-crawling-design.md\n- github.com/markusmobius/go-trafilatura/cmd/go-trafilatura/sitemap.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T22:01:24.476838-08:00","updated_at":"2025-12-08T13:38:49.035033-08:00","closed_at":"2025-12-08T13:38:49.035037-08:00","dependencies":[{"issue_id":"locdoc-mtz","depends_on_id":"locdoc-a3y","type":"parent-child","created_at":"2025-12-07T22:02:04.951025-08:00","created_by":"daemon"}]}
{"id":"locdoc-nnd","title":"Create .claude/ commands","description":"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:40:32.484792-08:00","updated_at":"2025-12-07T20:31:12.324995-08:00","closed_at":"2025-12-07T20:31:12.324998-08:00"}
{"id":"locdoc-wfk","title":"Implement cmd/locdoc/ CLI","description":"## Problem\n\nNeed CLI to wire all packages together and provide user interface.\n\n## Entrypoints\n\n- Create or update `cmd/locdoc/` directory\n- Wire all implementation packages\n\n## Requirements\n\n- `locdoc add \u003cname\u003e \u003curl\u003e` - register project with sitemap URL\n- `locdoc list` - show registered projects\n- `locdoc crawl [name]` - run full pipeline for all/one project\n- Wire: http/ → rod/ → trafilatura/ → htmltomd/ → sqlite/\n- Exit codes for success/failure\n- Progress output during crawl\n\n## Validation\n\n- [ ] End-to-end test: add project, crawl, verify documents stored\n- [ ] Test against real site (e.g., go.dev/doc/)\n- [ ] `make validate` passes\n- [ ] `CGO_ENABLED=0 go build` succeeds\n\n## References\n\n- docs/plans/2025-12-07-crawling-design.md","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T22:01:24.997083-08:00","updated_at":"2025-12-07T22:01:24.997083-08:00","dependencies":[{"issue_id":"locdoc-wfk","depends_on_id":"locdoc-mdd","type":"blocks","created_at":"2025-12-07T22:01:57.308742-08:00","created_by":"daemon"},{"issue_id":"locdoc-wfk","depends_on_id":"locdoc-mtz","type":"blocks","created_at":"2025-12-07T22:01:57.334324-08:00","created_by":"daemon"},{"issue_id":"locdoc-wfk","depends_on_id":"locdoc-a3y","type":"parent-child","created_at":"2025-12-07T22:02:05.057883-08:00","created_by":"daemon"}]}
